<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating Tier Lists • gtUtils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Jost-0.4.9/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Oswald-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating Tier Lists">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gtUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/border_bars.html">Border Bars</a></li>
    <li><a class="dropdown-item" href="../articles/general_uses.html">General Uses</a></li>
    <li><a class="dropdown-item" href="../articles/table_themes.html">Table Themes</a></li>
    <li><a class="dropdown-item" href="../articles/tier_list.html">Creating Tier Lists</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/andreweatherman/gtUtils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creating Tier Lists</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/andreweatherman/gtUtils/blob/main/vignettes/tier_list.Rmd" class="external-link"><code>vignettes/tier_list.Rmd</code></a></small>
      <div class="d-none name"><code>tier_list.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gtutils.aweatherman.com/" class="external-link">gtUtils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">cbbdata</span><span class="op">)</span></span></code></pre></div>
<p><code>gtUtils</code> ships with a function that makes creating tier
lists convenient and quick. However, you need to pass your data to
<code>gt</code> in a specific format. This vignette walks through how to
create a simple tier list.</p>
<p><img src="images/tier_list_example.png" width="75%" style="display: block; margin: auto;"></p>
<div class="section level2">
<h2 id="basic-tier-list">Basic Tier List<a class="anchor" aria-label="anchor" href="#basic-tier-list"></a>
</h2>
<p>For this example, we will be using data that is fetched from the <a href="https://www.cbbdata.aweatherman.com/" class="external-link">{cbbdata}</a> package. For
conveniance, that data will be pushed to a gist for easy extraction.</p>
<div class="section level3">
<h3 id="processing">Processing<a class="anchor" aria-label="anchor" href="#processing"></a>
</h3>
<p>If you’re interested in how to pull the data from
<code>cbbdata</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cbd_kenpom_ratings</span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2024</span>, conf <span class="op">=</span> <span class="st">"ACC"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="va">team</span>, <span class="va">adj_em</span><span class="op">)</span></span></code></pre></div>
<p>First, let’s fetch the data form GitHub.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"https://gist.github.com/andreweatherman/a8aaa6057e9858cd11c3327fc32df5bb/raw/3a54e221ae529dc8a2f37077770d7fb1b573b2c9/gtUtils_example_tier_list.csv"</span><span class="op">)</span></span></code></pre></div>
<p>We need to establish tiers and colors. For this example, we are going
to use three distinct categories and use traditional tier list
background colors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Elite"</span>, <span class="st">"Average"</span>, <span class="st">"Poor"</span><span class="op">)</span></span>
<span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FF7F7F"</span>, <span class="st">"#FFDF7F"</span>, <span class="st">"#BFFF7F"</span><span class="op">)</span></span></code></pre></div>
<p>Next, we need to bin our data into these tiers.
<code>subset_rank</code> uses the <code>dense_rank</code> function to
assign ordinal ranks based on our column of interest – adjusted
efficiency margin. Next, we use the cut function to divide these ranks
into distinct tiers based on quantiles, specifying the breaks at the
25th and 75th percentiles. This means the data is split into three
groups, with the lower 25% in one tier, the middle 50% in another, and
the upper 25% in the final tier. The levels argument provides custom
labels for each tier – referencing the <code>levels</code> vector above
– while <code>include.lowest = TRUE</code> ensures the lowest rank is
included in the first tier.</p>
<p>Finally, tier_order is calculated as the rank within each tier using
<code>dense_rank</code> again, but this time grouped by the tier to
ensure the ordering is relative to each group.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>subset_rank <span class="op">=</span> <span class="fu">dense_rank</span><span class="op">(</span><span class="op">-</span><span class="va">adj_em</span><span class="op">)</span>,</span>
<span>         tier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">subset_rank</span>, </span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">subset_rank</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.25</span>, <span class="fl">0.75</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                     labels <span class="op">=</span> <span class="va">levels</span>, </span>
<span>                     include.lowest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>tier_order <span class="op">=</span> <span class="fu">dense_rank</span><span class="op">(</span><span class="va">subset_rank</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">tier</span><span class="op">)</span></span></code></pre></div>
<p>We can use <code>cbbdata</code> to grab team logos and join them onto
our data. Importantly, we are going to use a dark table theme, so we
need to grab the dark mode logos.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">left_join</span><span class="op">(</span><span class="fu">cbd_teams</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span>team <span class="op">=</span> <span class="va">common_team</span>, logo <span class="op">=</span> <span class="va">espn_dark_logo</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we need to pivot our data to a <em>wide</em> format. This
ensures that we will be plotting logos horizontally.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu">pivot_wider</span><span class="op">(</span>id_cols <span class="op">=</span> <span class="va">tier</span>, names_from <span class="op">=</span> <span class="va">tier_order</span>, values_from <span class="op">=</span> <span class="va">logo</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">tier</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="va">tier</span><span class="op">)</span></span></code></pre></div>
<p>Great – if your data looks similar to this, you’re ready to make a
tier list!</p>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<p><code>gt_tiers</code> does a few things under the hood: - It renders
images from links - It applies the <code>gt_theme_tier</code> function
using “dark” mode as a default - It forces all column labels to be
blank</p>
<p>Let’s apply it!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/gt_tiers.html">gt_tiers</a></span><span class="op">(</span><span class="va">levels</span>, <span class="va">colors</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Example Tier List using gtUtils"</span>, </span>
<span>           subtitle <span class="op">=</span> <span class="st">"Ranking ACC teams by 2024 KenPom rating"</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/tier_list_example.png" width="75%" style="display: block; margin: auto;"></p>
<p>All done! You’ve created a tier list in <code>gt</code> using
<code>gtUtils</code>. As of <code>gtUtils</code> v0.1, the tier list
function is somewhat limited: a) it only supports image cells and b) it
will not “wrap” your logos to condense the width (you can play around
with image_height to do this).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Weatherman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
